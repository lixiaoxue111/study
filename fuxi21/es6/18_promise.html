<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
    <script src="../../jquery/jquery-3.3.1.min.js"></script>
    <script>


        /*$.get('a.json',function (data) {  // 层层回调  结构复杂
            if(data.status==1){
                $.get('test.json',function (data) {

                })
            }
        })*/


        // Promise是异步编程的一种解决方案 ，
       /* var p1=new Promise(function (resolve,reject) { //异步请求以同步流程表达
            $.get('a.json',function (data) {
                if(data.status==1){
                    resolve(1);
                }else {
                    reject(2);
                }
            })
        }).then(function (res) {
            console.log('ok');
        }).catch(function (res) {
            console.log('no');
        })*/



       let p1=new Promise(function (resolve, reject) {
           setTimeout(function(){
               console.log('p1 ok');
               resolve();
           },1000);
       });
        let p2=new Promise(function (resolve, reject) {
            setTimeout(function(){
                console.log('p2 ok');
                resolve();
            },1500);
        });
        let p3=new Promise(function (resolve, reject) {
            setTimeout(function(){
                console.log('p3 ok');
                //resolve();
                reject();
            },800);
        });

       /* Promise.all([p1,p2,p3]).then(function () { //只有所有的请求都成功了 才能请求成功
            console.log('111')
        }).catch(function () {
            console.log('222');
        })*/


       Promise.race([p1,p2,p3]).then(function () {// 状态取决于最先执行完的
           console.log('ok');
       }).catch(function () {
           console.log('no');
       })
    </script>
</body>
</html>